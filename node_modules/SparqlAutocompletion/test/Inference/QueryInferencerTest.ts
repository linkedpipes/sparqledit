import { QueryClassInferencer } from '../../src/Autocompletition/Inference/QueryClassInferencer';
import { createOntologyFromTurtle } from "../Utils/Utils"
import * as chai from 'chai';
import { ERSParser } from "ERSParser";

describe('QueryInferencer', () => {
    it('should run', () => {
        var ontologyHierarchy = createOntologyFromTurtle(require('raw-loader!../TestData/Inference/QueryInferencer/ontology.ttl'));
        var ontologyInferencer = new QueryClassInferencer(ontologyHierarchy);
        var parser = new ERSParser();
        var query = parser.parse(require("raw-loader!../TestData/Inference/QueryInferencer/query1.sparql")).query;

        var result = ontologyInferencer.inferClasses(query);
        chai.assert.equal(4, result.variables.length);
        chai.assert.equal(1, result.variables[0].possibleClasses.length);
    });
});
