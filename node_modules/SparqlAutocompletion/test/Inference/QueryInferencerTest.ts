import { QueryClassInferencer } from '../../src/Autocompletition/Inference/QueryClassInferencer';
import { createOntologyFromTurtle } from "../Utils/Utils"
import * as chai from 'chai';
import { ERSParser } from "ERSParser";

describe('QueryInferencer', () => {
    it('should run', () => {
        var ontologyHiearchy = createOntologyFromTurtle(require('raw-loader!./data/ontology.turtle'));
        var ontologyInferencer = new QueryClassInferencer(ontologyHiearchy);
        var parser = new ERSParser();
        var query = parser.parse(require("raw-loader!./data/query1.sparql")).query;

        var result = ontologyInferencer.inferClasses(query);
        chai.assert.equal(4, result.variables.length);
        chai.assert.equal(1, result.variables[0].possibleClasses.length);
    });
});
