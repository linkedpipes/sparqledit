import { FullParentOntologyClassTracker } from "../../../src/Autocompletition/Inference/ParentOntologyClassTracker";
import { createPropertyAdviceForOntologyClass } from "../../../src/Autocompletition/Inference/PropertyAdviceHelper";
import { createOntologyAssertionsFromTurtle } from "../../Utils/Utils";
import { nc, no } from "../../Utils/OntologyObjectUtils";

import * as chai from 'chai';

describe("Property advice helper with full tracker", () => {
    var tracker = new FullParentOntologyClassTracker();
    it("should sort 1. testcase by topological order.", () => {
        var ontologyAssertions = createOntologyAssertionsFromTurtle(
            require("raw-loader!../../TestData/Autocompletition/PropertySelector/fullPropertySelectorOntology1.ttl")
        );

        var orderConcepts = createPropertyAdviceForOntologyClass(tracker, ontologyAssertions, nc(0));
        chai.expect(orderConcepts).to.deep.equal([no([0]), no([1]), no([2]), no([3]), no([4]), no([5]), no([6])]);
    });

    it("should sort 2. testcase by topological order.", () => {
        var ontologyAssertions = createOntologyAssertionsFromTurtle(
            require("raw-loader!../../TestData/Autocompletition/PropertySelector/fullPropertySelectorOntology2.ttl")
        );


        var orderConcepts = createPropertyAdviceForOntologyClass(tracker, ontologyAssertions, nc(0));
        chai.expect(orderConcepts).to.deep.equal([no([0]), no([1]), no([2]), no([3]), no([4]), no([5]), no([6])]);
    });

    it("should sort 3. testcase by topological order.", () => {
        var ontologyAssertions = createOntologyAssertionsFromTurtle(
            require("raw-loader!../../TestData/Autocompletition/PropertySelector/fullPropertySelectorOntology3.ttl")
        );


        var orderConcepts = createPropertyAdviceForOntologyClass(tracker, ontologyAssertions, nc(0));
        chai.expect(orderConcepts).to.deep.equal([no([0])]);
    });

    it("should not fail on non-existing ontology concept.", () => {
        var ontologyAssertions = createOntologyAssertionsFromTurtle(
            require("raw-loader!../../TestData/Autocompletition/PropertySelector/fullPropertySelectorOntology3.ttl")
        );

        var orderConcepts = createPropertyAdviceForOntologyClass(tracker, ontologyAssertions, nc(1));
        chai.expect(orderConcepts).to.deep.equal([no([1])]);
    });
});