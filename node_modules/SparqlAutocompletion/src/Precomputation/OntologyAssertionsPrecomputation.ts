import { TurtleGraphWrapper } from "../GraphTools/TurtleGraphWrapper";
import { OntologyAssertions } from "../Ontology/OntologyAssertions";
import { buildOntologyAssertions } from "../Ontology/Algorithms/OntologyAssertionBuilder";
import { Serializer } from "../Serialization/Serializer";

export class OntologyAssertionsPrecomputation {
    private serializer = new Serializer();

    public logging = false;

    private log(message: string) {
        if (this.logging) {
            console.log(message);
        }
    }

    /**
     * Precompute assertions
     * @param ontologyContent
     * @return serialized assertions
     */
    precompute(ontologyContent: string): string {
        this.log("Start building graph.");
        var graph = new TurtleGraphWrapper(ontologyContent);
        this.log("Graph builded start building assertions.");
        var result = buildOntologyAssertions(graph);
        this.log("Assertions builded start serializing.");
        var serializationResult = this.serializer.serializeOntologyAssertions(result.ontologyAssertions);
        this.log("Serialization done.");
        return serializationResult;
    }
}