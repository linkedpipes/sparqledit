import { Serializer } from '../Serialization/Serializer';
import { SparqlLanguageServer } from './SparqlLanguageServer';
import { OntologyAssertionsBuilder } from '../Ontology/Algorithms/OntologyAssertionBuilder';
import { OntologyHiearchy } from "../Ontology/OntologyHierchy"
import { TurtleGraphWrapper } from '../GraphTools/TurtleGraphWrapper';

export class SparqlLanguageServerFactory {

    public createFromTurtle(ontologyContent: string, forbiddenSources: string[] = []): SparqlLanguageServer {
        return this.createFromMultipleTurtle([ontologyContent], forbiddenSources);
    }

    public createFromMultipleTurtle(ontologyContents: string[], forbiddenSources: string[] = []): SparqlLanguageServer {
        var ontologyAssertionsBuilder = new OntologyAssertionsBuilder();
        var graphs = ontologyContents.map(x => new TurtleGraphWrapper(x, forbiddenSources));
        var ontologyAssertionsResult = ontologyAssertionsBuilder.buildOntologyAsertionsMultipleGraphs(graphs);
        return new SparqlLanguageServer(ontologyAssertionsResult.ontologyAssertions);
    }

    public createFromSerializedOntologyAssertions(serializedOntologyAssertions: string): SparqlLanguageServer {
        var serializer = new Serializer();
        var ontologyAssertions = serializer.deserializeOntologyAssertions(serializedOntologyAssertions);
        return new SparqlLanguageServer(ontologyAssertions);
    }
}