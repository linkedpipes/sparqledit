export function takeWhileNotWhitespace(text: string) {
    for (var i = text.length - 1; i >= 0; i--) {
        if (text[i] == " ") {
            return text.substr(0, i);
        }
    }

    return "";
}

export function removeCharactersAfterCursor(text: string) {
    for (var i = 0; i < text.length; i++) {
        var currentCharacter = text[i];
        if (currentCharacter == '\n' || currentCharacter == '\r') {
            return '.' + text.substring(i, text.length);
        }
    }
    return "";
}

export function injectTerminal(query: string, offset: number, terminal: string) {
    var beforeCursor = query.substring(0, offset);
    var atferCursor = query.substring(offset, query.length)
    return takeWhileNotWhitespace(beforeCursor) + ' ' + terminal + ' ' + removeCharactersAfterCursor(atferCursor);
}

export function injectCursor(query: string, offset: number) {
    return injectTerminal(query, offset, "cursor");
}

export function injectUnknown(query: string, offset: number) {
    return injectTerminal(query, offset, "unknown");
}
