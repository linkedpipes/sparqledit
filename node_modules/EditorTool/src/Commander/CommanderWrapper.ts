import { ICommand } from "EditorTool/src/Commander/ICommand";
import * as program from "commander";

export class CommanderWrapperError {
    constructor(public consoleMessage: string){
        // empty
    }
}

export class CommanderWrapper {

    constructor(private commands: ICommand[]) {
        // empty
    }

    public run(processArguments: any) {
        for (var command of this.commands) {
            program
                .command(command.getCommandDefinition())
                .description(command.getDescription())
                .action(command.getAction());
        }

        try {
            program.parse(processArguments);
        }
        catch (ex) {
            if (ex instanceof CommanderWrapperError) {
                console.log(ex.consoleMessage);
            }
            else {
                throw ex;
            }
        }
    }
}