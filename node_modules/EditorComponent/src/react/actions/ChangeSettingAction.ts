import { IEditorSettings } from '../model/EditorSettings';
import { EditorSettingsService } from '../service/EditorSettingsService';
import { IEditorStateRecord } from '../model/EditorState';
import { IAction } from './IAction';

export class ChangeSettingsAction implements IAction {
    private editorSettingsService = new EditorSettingsService();

    constructor(public settingsName: string, public settingValue: boolean) {

    }

    run(originalState: IEditorStateRecord): IEditorStateRecord {
    
        var newState = originalState.update('settings',
            (editorSettings: IEditorSettings) => editorSettings.setSettings(this.settingsName, this.settingValue));
    
        this.editorSettingsService.saveSettingsToCookies(newState.settings);
        return newState;
    }
}