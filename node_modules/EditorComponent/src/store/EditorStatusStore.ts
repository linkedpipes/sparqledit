import { observable } from "mobx";

export enum EditorStatus {
    Active,
    Loading,
    Error,
}

export class EditorStatusStore {

    @observable
    private editorStatus: EditorStatus;

    private errorMesage: string;

    constructor() {
        this.editorStatus = EditorStatus.Loading;
    }

    public getEditorStatus() {
        return this.editorStatus;
    }

    public getErrorMessage(): string {
        if (this.editorStatus != EditorStatus.Error) {
            throw new Error("Message is set only in case editor has error status.");
        }
        return this.errorMesage;
    }

    public setActive() {
        this.errorMesage = null;
        this.editorStatus = EditorStatus.Active;
    }

    public setLoading() {
        this.errorMesage = null;
        this.editorStatus = EditorStatus.Loading;
    }

    public setError(errorMesage: string) {
        this.errorMesage = errorMesage;
        this.editorStatus = EditorStatus.Error;
    }
};