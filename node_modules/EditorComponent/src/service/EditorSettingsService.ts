import { EditorSettingsStore, EditorSettingItem } from '../store/EditorSettingsStore';

import * as jsCookie from "js-cookie";
class CookiesServise {
    public get(name: string): string {
        return jsCookie.get(name);
    }

    public set(name: string, value: string) {
        jsCookie.set(name, value);
    }
}

export class EditorSettingsService {
    private cookies: any = new CookiesServise();

    loadSettingsFromCookies(editorSettings: EditorSettingsStore): EditorSettingsStore {
        for (var itemDefinition of editorSettings.itemsDefinitions) {
            var itemName = itemDefinition.name;
            var itemValue = this.cookies.get('settings.' + itemName) === "true";
            editorSettings.setSettings(itemName, itemValue);
        }
        return editorSettings;
    }

    saveSettingsToCookies(editorSettings: EditorSettingsStore) {
        for (var item of editorSettings.items) {
            this.cookies.set('settings.' + item.name, item.value.toString());
        }
    }
}