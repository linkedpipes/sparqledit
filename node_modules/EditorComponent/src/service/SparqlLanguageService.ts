import { SparqlLanguageServer, Serializer, TurtleGraphWrapper, OntologyHiearchyBuilder, OntologyAssertionsBuilder, SparqlAutocompleteProvider, SparqlSignatureHelpProvider, SparqlLanguageServerFactory } from "SparqlAutocompletion";
import { SparqlEditorSettings } from "EditorComponent/src/editor/SparqlEditorSettings";
import { createHttpRequest } from "EditorComponent/src/utils/HttpRequest";

export class SparqlLanguageService {
    private sparqlLanguageServer: SparqlLanguageServer;

    constructor(sparqlEditorSettings: SparqlEditorSettings) {
        var sparqlLanguageServerFactory = new SparqlLanguageServerFactory();
        console.log('Ontology downloading...');

        createHttpRequest(sparqlEditorSettings.ontologySourceUrl,
            (responseContent) => {
                console.log('Download completed.');
                this.sparqlLanguageServer = sparqlLanguageServerFactory.createFromEditorFormat(responseContent);
            },
            () => {
                console.log('downloading failed');
            }
        );
    }

    getLanguageServer() {
        return this.sparqlLanguageServer;
    }
}