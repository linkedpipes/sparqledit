import * as React from "react";
import { IEditorPluginApi } from '../../EditorPluginApi';
import { IPlugin } from '../../IPlugin';
import { Tool } from "../../../store/ToolStore";
import { PropertyAutocompleteComponent } from "./PropertyAutocompleteComponent"

export class PropertyAutocompleteTool implements IPlugin {
    init(monacoEditor: monaco.editor.IStandaloneCodeEditor, editorPluginApi: IEditorPluginApi): void {

        function getEditorContentAndCursorPosition() {
            var model = monacoEditor.getModel();
            return {
                content: model.getValue(),
                position: model.getOffsetAt(monacoEditor.getPosition())
            }
        }

        editorPluginApi.getToolStore().tools.push(
            new Tool(<PropertyAutocompleteComponent
                getEditorContentAndCursorPosition={getEditorContentAndCursorPosition}
                editorSettingsStore={editorPluginApi.getEditorSettings()} />
            ));
    }
}