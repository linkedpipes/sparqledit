import { IEditorPluginApi } from '../EditorPluginApi';
import { IPlugin } from '../IPlugin';
import * as jsCookie from "js-cookie";

export class EditorChangePlugin implements IPlugin {
    private contentCookieName = "sparqlEditor.content";
    
    init(editorPluginApi: IEditorPluginApi): void {
        var monacoEditor = editorPluginApi.getMonacoEditor();
        monacoEditor.getModel().onDidChangeContent((e) => {
            jsCookie.set(this.contentCookieName, monacoEditor.getModel().getValue());
        });

        var content = jsCookie.get(this.contentCookieName);
        if (content != undefined) {
            monacoEditor.getModel().setValue(content);
        }
    }
}