import { PluginManager } from '../plugins/PluginManager';

export class MonacoEditorFactory {

    initMonacoEditor(containerElement: HTMLElement,
        setMonacoEditor: (monacoEditor: monaco.editor.IStandaloneCodeEditor) => void) {
        var fn = this.createMonacoEditor;
        (window as any).requirejs.config({ paths: { vs: '../node_modules/monaco-editor/min/vs' } });
        (window as any).requirejs(['vs/editor/editor.main'], function () {
            monaco.languages.register({ id: 'sparql' });
            var editor = fn.call(this, containerElement);
            setMonacoEditor(editor);
        });
    }

    private createMonacoEditor(containerElement: HTMLElement) {
        var defaultValue = [
            'select * where {',
            '?a ?b ?c',
            '}'
        ].join('\n');
        
        var editor = monaco.editor.create(containerElement, {
            value: defaultValue,
            language: 'sparql'
        });
        return editor;
    }
}